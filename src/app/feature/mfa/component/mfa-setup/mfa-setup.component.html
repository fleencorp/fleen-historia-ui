<form *ngIf="isFormReady" [formGroup]="mfaSetupForm" (ngSubmit)="setupMfa()" method="post" enctype="application/x-www-form-urlencoded" class="sign-up-form">
  <app-form-message [status-message]="statusMessage" [error-message]="errorMessage"></app-form-message>

  <div class="form-group" *ngIf="!isCodeVerificationStage">
    <input type ="radio" formControlName="mfaType" value="PHONE" id="mfa_type_phone"/>
    <label for="mfa_type_phone">Phone</label>

    <input type ="radio" formControlName="mfaType" value="EMAIL" id="mfa_type_email"/>
    <label for="mfa_type_email">Email</label>

    <input type ="radio" formControlName="mfaType" value="AUTHENTICATOR" id="mfa_type_authenticator"/>
    <label for="mfa_type_authenticator">Authenticator</label><br/>

    <input type ="radio" formControlName="mfaType" value="NONE" id="mfa_type_none"/>
    <label for="mfa_type_none">None</label><br/>
    <app-validation-error [control]="mfaType" [control-label]="'Mfa Type'"></app-validation-error>
  </div>


    <div class="qr-box" #qrCodeImage>
      <ng-container *ngIf="isQrVerificationStage">
        <p *ngIf="qrCodeSecret">{{ qrCodeSecret }}</p>

      </ng-container>
    </div>

  <p *ngIf="isVerificationCodeSent">Code has been sent</p>

  <ng-container *ngIf="isCodeVerificationStage">
      <label for="verification_code">Verification Code:</label>
    <input type="text" formControlName="code" id="verification_code"/>
    <app-validation-error [control]="code" [control-label]="'Verification code'"></app-validation-error>
  </ng-container>

  <button *ngIf="canResendCode" type="button" [disabled]="isSubmitting" (click)="resendVerificationCode()"> Resend Verification Code </button>
  <button *ngIf="!isCodeVerificationStage" type="submit" [disabled]="isSubmitting">Submit</button>
  <button *ngIf="canConfirmMfaSetup" type="button" [disabled]="isSubmitting" (click)="confirmMfaSetup()">Confirm Setup</button>

</form>
